<apex:page standardController="SurveyTemplateItem__c" extensions="SurveyTemplateItemExtensions">

    <apex:sectionHeader title="{!$ObjectType.SurveyTemplateItem__c.label} {!$Label.site.edit}" subtitle="{!$Label.New} {!$ObjectType.SurveyTemplateItem__c.label}"/>
    <apex:form >
        <apex:pageBlock title="{!$ObjectType.SurveyTemplateItem__c.label} {!$Label.site.edit}" mode="edit">
            <apex:pageBlockButtons location="both">
                <apex:commandButton value="{!$Label.site.save}" action="{!save}"/>
                <apex:commandButton value="{!$Label.site.save} & {!$Label.New}" action="{!saveNew}"/>
                <apex:commandButton value="{!$Label.site.cancel}" action="{!cancel}"/>
            </apex:pageBlockButtons>
            <apex:pageMessages />
            <apex:pageBlockSection title="{!$Label.Information}" columns="1">
                <apex:inputField value="{!SurveyTemplateItem__c.SurveyTemplate__c}"></apex:inputField>
                <apex:inputField value="{!SurveyTemplateItem__c.Order__c}"></apex:inputField>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="{!$ObjectType.SurveyTemplateItem__c.fields.QuestionProvider__c.Label}"></apex:outputLabel>
                    <apex:actionRegion >
                        <apex:inputField value="{!templateItem.QuestionProvider__c}">
                            <apex:actionSupport event="onchange" action="{!setConfig}" rerender="configSignature, config"></apex:actionSupport>
                        </apex:inputField>
                    </apex:actionRegion>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="{!$ObjectType.SurveyTemplateItem__c.fields.Config__c.Label}"></apex:outputLabel>
                    <apex:outputPanel id="config">
                        <apex:inputTextArea value="{!templateItem.Config__c}" cols="50" rows="5"></apex:inputTextArea>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                        <apex:outputLabel value="{!$ObjectType.SurveyTemplateItem__c.fields.Required__c.Label}"></apex:outputLabel>
                        <apex:outputPanel id="system">
                            <apex:inputField value="{!templateItem.Required__c}"></apex:inputField>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="{!$ObjectType.SurveyTemplateItem__c.fields.IsSystem__c.Label}"></apex:outputLabel>
                        <apex:inputField value="{!templateItem.IsSystem__c}">
                            <apex:actionSupport event="onchange" action="{!checkedRequired}" rerender="system" status="systemChanging"></apex:actionSupport>
                            <apex:actionStatus id="systemChanging">
                                <apex:facet name="start">
                                    <apex:image value="/img/loading32.gif" width="16" height="16" style="vertical-align:middle"/>
                                </apex:facet>
                            </apex:actionStatus>
                        </apex:inputField>
                   </apex:pageBlockSectionItem>
            </apex:pageBlockSection>
        </apex:pageBlock>
    </apex:form>
</apex:page>