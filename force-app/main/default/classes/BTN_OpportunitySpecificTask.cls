/**
* @author Pawel Iwanowicz
* @date 20/05/2016
* @description BTN_OpportunitySpecificTask class designed for deletion of specific task
*/
public class BTN_OpportunitySpecificTask {
    
    /**
    * @author Pawel Iwanowicz
    * @date 20/05/2016
    * @description deleteSpecificTaskCreatedAutomatically method - deletes specific task generated by the system
    * @param List<Opportunity>
    */
    @InvocableMethod(label='Delete Specific Task' description='Deletes specific task generated by the system')
    public static void deleteSpecificTaskCreatedAutomatically(List<Opportunity> oppList) {

        String taskSubjectToDelete = BTN_ConstantRepo.TASK_SUBJECT;
        Set<Id> opportunitiesIds = new Map<Id, Opportunity>(oppList).keySet();
        List<Task> tasksToChange = new List<Task>();
        for (Task singleTask : new BTN_DAO_Task().findTasksByParents(opportunitiesIds, true, taskSubjectToDelete)) {
            singleTask.Status = BTN_ConstantRepo.TASK_STATUS_COMPLETED;
            tasksToChange.add(singleTask);
        }
        update tasksToChange;
    }
}